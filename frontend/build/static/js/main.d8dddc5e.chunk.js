(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{203:function(e,t,a){},228:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(43),i=a.n(r),l=(a(203),a(23)),o=a(166),s=a(297),d=a(106),u=a(20),j=a(296),b=a(93),x=a(286),h=a(11),O=a(18),m=a(171),p=a(24),f=a(314),g=a(167),v=a(312),y=a(315),C=a(313),k=a(290),w=a(304),T=a(299),_=a(162),E=a.n(_),S=a(289),q=a(316),D=a(90),M=a(303),R=a(305),L=a(317),W=a(319),I=a(318),P=a(281),A=a(322),z=a(310),F=a(16),U=a(119),$=a(33),B=Object(U.a)({reducerPath:"api",baseQuery:Object($.d)({baseUrl:"/api/v1"}),tagTypes:["Languages","Models","Results","Templates","Relevances","Configs","Databases"],endpoints:function(){return{}}}),G=B,N={name:"",text:"",code:"",equation:"",mode:"default",model:"",language:"",url:"",user:"homer",database:""},Q=B.injectEndpoints({endpoints:function(e){return{getTemplates:e.query({query:function(){return"/query-templates"},providesTags:function(e){return e?[].concat(Object(F.a)(e.map((function(e){return{type:"Templates",id:e.id}}))),["Templates"]):["Templates"]}}),addTemplate:e.mutation({query:function(e){return{url:"/query-templates",method:"POST",body:e}},invalidatesTags:["Templates"]}),deleteTemplate:e.mutation({query:function(e){return{url:"/query-templates/".concat(e),method:"DELETE"}},invalidatesTags:function(e,t,a){return[{type:"Templates",id:a}]}})}},overrideExisting:!1}),H=Q.useAddTemplateMutation,J=Q.useDeleteTemplateMutation,K=Q.useGetTemplatesQuery,V=a(277),Y=a(298),X=a(275),Z=a(276),ee=a(154),te=a.n(ee),ae=a(155),ne=a.n(ae),ce=a(64),re=function(){return Object(l.d)()},ie=l.e,le=a(14),oe=Object(le.d)({name:"snackbar",initialState:{time:5e3,text:"initial text",open:!1},reducers:{setSnackbarText:function(e,t){e.text=t.payload},toggleSnackbar:function(e,t){e.open=t.payload}}}),se=oe.actions,de=se.setSnackbarText,ue=se.toggleSnackbar,je=function(e){return e.snackbar},be=oe.reducer,xe=Object(le.d)({name:"search",initialState:{language:"english",model:"PyterrierModel",mode:"default",text:"",code:"",equation:"",url:"",file:"",params:null,exchange:"",db:"postdb.db"},reducers:{setURL:function(e,t){e.url=t.payload},setFile:function(e,t){e.file=t.payload},setLanguage:function(e,t){e.language=t.payload},setModel:function(e,t){e.model=t.payload},setText:function(e,t){e.text=t.payload},setCode:function(e,t){e.code=t.payload},setEquation:function(e,t){e.equation=t.payload},setMode:function(e,t){e.mode=t.payload},setExchange:function(e,t){e.exchange=t.payload},setDb:function(e,t){e.db=t.payload},setParams:function(e){var t=e.language,a=e.model,n=e.mode,c=e.text,r=e.code,i=e.equation,l=e.exchange,o=e.url,s=e.db;switch(n){case"default":e.params="text=".concat(c,"&")+"model=".concat(a,"&")+"model-language=".concat(t,"&")+"db=".concat(s);break;case"separated":e.params="code=".concat(r,"&")+"equations=".concat(i,"&")+"model=".concat(a,"&")+"model-language=".concat(t,"&")+"db=".concat(s);break;case"url":case"file":e.params="id=".concat(encodeURIComponent(o),"&")+"exchange=".concat(encodeURIComponent(l),"&")+"model=".concat(encodeURIComponent(a),"&")+"model-language=".concat(encodeURIComponent(t))+"db=".concat(s);break;default:e.params="action.payload"}},applyTemplate:function(e,t){var a=t.payload,n=a.model,c=a.language,r=a.mode,i=a.text,l=a.code,o=a.equation,s=a.url,d=a.database;e.model=n,e.language=c,e.mode=r,e.text=i,e.code=l,e.equation=o,e.url=s,e.db=d}}}),he=xe.actions,Oe=he.setDb,me=he.setLanguage,pe=he.setModel,fe=he.setText,ge=he.setMode,ve=he.setCode,ye=he.setEquation,Ce=he.setURL,ke=(he.setFile,he.setParams),we=he.applyTemplate,Te=function(e){return e.search.code},_e=function(e){return e.search.equation},Ee=function(e){return e.search.language},Se=function(e){return e.search.url},qe=function(e){return e.search.model},De=function(e){return e.search.mode},Me=function(e){return e.search.db},Re=function(e){return e.search.text},Le=function(e){return e.search.params},We=function(e){return e.search},Ie=xe.reducer,Pe=a(1);function Ae(e){var t=re(),a=e.template,n=e.onClose,c=J(),r=Object(h.a)(c,2),i=r[0],l=r[1],o=l.isLoading,s=l.isSuccess,d=Object(O.a)({},s&&{bgcolor:ce.a[500],"&:hover":{bgcolor:ce.a[700]}});return Object(Pe.jsxs)(Pe.Fragment,{children:[Object(Pe.jsx)(Y.a,{alignItems:"flex-start",secondaryAction:Object(Pe.jsxs)(M.a,{sx:{m:1,position:"relative"},children:[Object(Pe.jsx)(w.a,{sx:d,onClick:function(){i(a.id).then((function(){t(de("Template deleted successfully.")),t(ue(!0))}))},edge:"end","aria-label":"delete",children:s?Object(Pe.jsx)(te.a,{}):Object(Pe.jsx)(ne.a,{})}),o&&Object(Pe.jsx)(A.a,{size:68,sx:{color:ce.a[500],position:"absolute",top:-6,left:-6,zIndex:1}})]}),disablePadding:!0,children:Object(Pe.jsx)(X.a,{onClick:function(){t(we(a)),t(ke()),n()},children:Object(Pe.jsx)(Z.a,{primary:a.name})})},a.id),Object(Pe.jsx)(V.a,{component:"li"})]})}function ze(e){var t=e.onClose,a=K(),n=a.data,c=a.isLoading,r=a.isError;return c?Object(Pe.jsx)(M.a,{sx:{m:3,textAlign:"center"},children:Object(Pe.jsx)(A.a,{})}):r?Object(Pe.jsx)(D.a,{variant:"subtitle1",children:"Oops! Something went wrong!"}):0===(null===n||void 0===n?void 0:n.length)?Object(Pe.jsx)(D.a,{variant:"subtitle1",children:"No templates yet..."}):Object(Pe.jsx)(z.a,{children:null===n||void 0===n?void 0:n.map((function(e){return Object(Pe.jsx)(Ae,{onClose:t,template:e},e.id)}))})}function Fe(){var e=n.useState(!1),t=Object(h.a)(e,2),a=t[0],c=t[1],r=function(){c(!1)};return Object(Pe.jsxs)(Pe.Fragment,{children:[Object(Pe.jsx)(R.a,{variant:"contained",disableElevation:!0,onClick:function(){c(!0)},children:"Templates"}),Object(Pe.jsxs)(L.a,{fullWidth:!0,maxWidth:"sm",open:a,onClose:r,children:[Object(Pe.jsx)(P.a,{children:"Available Query Templates"}),Object(Pe.jsx)(I.a,{children:Object(Pe.jsx)(ze,{onClose:r})}),Object(Pe.jsx)(W.a,{children:Object(Pe.jsx)(R.a,{onClick:r,children:"Cancel"})})]})]})}var Ue=a(31),$e=a(311),Be=a(288),Ge=a(158),Ne=a.n(Ge),Qe=a(159),He=a.n(Qe),Je=a(170),Ke=a(76),Ve=a.n(Ke),Ye=a(104),Xe=a(3),Ze=a(307),et=a(308),tt=a(306),at=a(283),nt=a(291),ct=a(285),rt=a(295),it=B.injectEndpoints({endpoints:function(e){return{getLanguages:e.query({query:function(){return"/languages"},providesTags:["Languages"]})}},overrideExisting:!1}).useGetLanguagesQuery,lt=B.injectEndpoints({endpoints:function(e){return{getModels:e.query({query:function(){return"/models"},providesTags:["Models"]})}},overrideExisting:!1}).useGetModelsQuery,ot=B.injectEndpoints({endpoints:function(e){return{getDatabases:e.query({query:function(){return"/dbs"},providesTags:["Databases"]})}},overrideExisting:!1}).useGetDatabasesQuery,st=a(169),dt=a(157);function ut(e){var t=Object(st.a)(/(<span class="math\x2Dcontainer" id="[0-9a-z]+">)(.*?)(?=<\/span>|$)(<\/span>)/g,{open:1,formel:2,close:3});return e=e.replaceAll(t,"$$$<formel>$$")}function jt(e){var t=e.text;return Object(Pe.jsx)(Pe.Fragment,{children:Object(Pe.jsx)(b.MathJax,{dynamic:!0,children:Object(dt.a)(ut(t))})})}function bt(e){var t=re(),a=e.open,c=e.onClose,r=it().data,i=void 0===r?[]:r,l=lt().data,o=void 0===l?[]:l,s=ot().data,d=void 0===s?[]:s,u=n.useState(N),b=Object(h.a)(u,2),x=b[0],m=b[1],p=function(e){return e!==x.mode},f=H(),g=Object(h.a)(f,2),y=g[0],w=g[1],_=w.isLoading,E=w.isSuccess,S=Object(O.a)({},E&&{bgcolor:ce.a[500],"&:hover":{bgcolor:ce.a[700]}}),q=function(e,t){var a=Object(O.a)(Object(O.a)({},x),{},Object(Xe.a)({},t,e.target.value));m(a)},z=function(e,t){var a=Object(O.a)(Object(O.a)({},x),{},Object(Xe.a)({},t,e.target.value));m(a)},F=function(){var e=Object(Ye.a)(Ve.a.mark((function e(){var a;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(O.a)({},N),e.t0=x.mode,e.next="default"===e.t0?4:"separated"===e.t0?7:"url"===e.t0?11:14;break;case 4:return a.mode=x.mode,a.text=x.text,e.abrupt("break",17);case 7:return a.mode=x.mode,a.code=x.code,a.equation=x.equation,e.abrupt("break",17);case 11:return a.mode=x.mode,a.url=x.url,e.abrupt("break",17);case 14:return a.mode=x.mode,a.text=x.text,e.abrupt("break",17);case 17:return a.name=x.name,a.language=x.language,a.model=x.model,a.database=x.database,e.prev=21,e.next=24,y(a).unwrap();case 24:m(N),c(),t(de("\u2705\u200e\u200e Template created successfully.")),t(ue(!0)),e.next=34;break;case 30:e.prev=30,e.t1=e.catch(21),t(de("\ud83d\ude22 Something went wront. Your template could not be created.")),t(ue(!0));case 34:case"end":return e.stop()}}),e,null,[[21,30]])})));return function(){return e.apply(this,arguments)}}();return Object(Pe.jsxs)(L.a,{open:a,fullWidth:!0,maxWidth:"sm",children:[Object(Pe.jsx)(P.a,{children:"Create Template"}),Object(Pe.jsx)(I.a,{children:Object(Pe.jsxs)(j.a,{container:!0,spacing:2,children:[Object(Pe.jsx)(j.a,{item:!0,xs:12,children:Object(Pe.jsx)(rt.a,{onChange:function(e){return q(e,"name")},id:"name-input",label:"Name",variant:"filled",fullWidth:!0})}),Object(Pe.jsx)(j.a,{item:!0,xs:12,sm:6,children:Object(Pe.jsxs)(v.a,{fullWidth:!0,variant:"filled",children:[Object(Pe.jsx)(C.a,{id:"model-select-label",children:"Model"}),Object(Pe.jsx)(k.a,{labelId:"model-select-label",id:"model-select",value:x.model,onChange:function(e){return z(e,"model")},children:null===o||void 0===o?void 0:o.map((function(e){return Object(Pe.jsx)(T.a,{value:e,children:e},e)}))})]})}),Object(Pe.jsx)(j.a,{item:!0,xs:12,sm:6,children:Object(Pe.jsxs)(v.a,{fullWidth:!0,variant:"filled",children:[Object(Pe.jsx)(C.a,{id:"modelLanguage-select-label",children:"Model language"}),Object(Pe.jsx)(k.a,{labelId:"modelLanguage-select-label",id:"modelLanguage-select",value:x.language,onChange:function(e){return z(e,"language")},children:null===i||void 0===i?void 0:i.map((function(e){return Object(Pe.jsx)(T.a,{value:e,children:e},e)}))})]})}),Object(Pe.jsx)(j.a,{item:!0,xs:12,children:Object(Pe.jsxs)(v.a,{fullWidth:!0,variant:"filled",children:[Object(Pe.jsx)(C.a,{id:"database-select-label",children:"Database"}),Object(Pe.jsx)(k.a,{labelId:"database-select-label",id:"database-select",value:x.database,onChange:function(e){return z(e,"database")},children:null===d||void 0===d?void 0:d.map((function(e){return Object(Pe.jsx)(T.a,{value:e,children:e},e)}))})]})}),Object(Pe.jsx)(j.a,{item:!0,xs:12,children:Object(Pe.jsxs)(v.a,{component:"fieldset",children:[Object(Pe.jsx)(at.a,{component:"legend",children:"Search mode..."}),Object(Pe.jsxs)(ct.a,{row:!0,defaultValue:"default",onChange:function(e){return z(e,"mode")},"aria-label":"search mode",name:"search-mode-radio-buttons-group",children:[Object(Pe.jsx)(tt.a,{value:"default",control:Object(Pe.jsx)(nt.a,{}),label:"Default"}),Object(Pe.jsx)(tt.a,{value:"separated",control:Object(Pe.jsx)(nt.a,{}),label:"Separated"}),Object(Pe.jsx)(tt.a,{value:"url",control:Object(Pe.jsx)(nt.a,{}),label:"URL"})]})]})}),Object(Pe.jsx)(j.a,{item:!0,xs:12,children:Object(Pe.jsx)(rt.a,{onChange:function(e){return q(e,"text")},disabled:p("default"),id:"default-search-input",label:"Default Search",variant:"filled",fullWidth:!0,helperText:"This field supports markdown."})}),Object(Pe.jsx)(j.a,{item:!0,xs:12,children:Object(Pe.jsx)(rt.a,{onChange:function(e){return q(e,"code")},disabled:p("separated"),id:"code-search-input",label:"Code",variant:"filled",fullWidth:!0})}),Object(Pe.jsx)(j.a,{item:!0,xs:12,children:Object(Pe.jsx)(rt.a,{onChange:function(e){return q(e,"equation")},disabled:p("separated"),id:"equation-search-input",label:"Equation",variant:"filled",fullWidth:!0,helperText:"This field supports markdown."})}),Object(Pe.jsx)(j.a,{item:!0,xs:12,children:Object(Pe.jsx)(rt.a,{onChange:function(e){return q(e,"url")},disabled:p("url"),id:"id-search-input",label:"ID or URL",variant:"filled",fullWidth:!0})}),Object(Pe.jsx)(j.a,{item:!0,xs:12,children:Object(Pe.jsx)(Ze.a,{variant:"outlined",children:Object(Pe.jsxs)(et.a,{children:[Object(Pe.jsx)(D.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:"Equation Preview"}),Object(Pe.jsx)(D.a,{variant:"h5",component:"div",children:Object(Pe.jsx)(jt,{text:x.text})})]})})})]})}),Object(Pe.jsxs)(W.a,{children:[Object(Pe.jsx)(R.a,{autoFocus:!0,onClick:function(){return c()},children:"Cancel"}),Object(Pe.jsxs)(M.a,{sx:{m:1,position:"relative"},children:[Object(Pe.jsx)(R.a,{variant:"contained",sx:S,disabled:_,onClick:F,children:"Create"}),_&&Object(Pe.jsx)(A.a,{size:24,sx:{color:"success",position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]})]})]})}function xt(){var e=c.a.useRef(null),t=re(),a=ie(Re),n=c.a.useState(!1),r=Object(h.a)(n,2),i=r[0],l=r[1],o=c.a.useState(!0),s=Object(h.a)(o,2),d=s[0],u=s[1],j=function(){t(fe(a)),t(ge("default")),t(ke())};return Object(Pe.jsx)(Pe.Fragment,{children:Object(Pe.jsxs)(Je.a,{keyName:"command+k,ctrl+k",onKeyDown:function(){var t;null===(t=e.current)||void 0===t||t.focus()},children:[Object(Pe.jsxs)(x.a,{children:[Object(Pe.jsx)(Be.a,{open:d,placement:"top-start",title:"Try \u2318+K",children:Object(Pe.jsxs)($e.a,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:800,borderRadius:"30px",m:"auto"},children:[Object(Pe.jsx)(Ue.c,{inputRef:e,sx:{ml:2,flex:1},placeholder:"Search",inputProps:{"aria-label":"search"},value:a,onChange:function(e){t(fe(e.target.value))},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),j())},onFocus:function(){return u(!1)}}),Object(Pe.jsx)(Be.a,{title:"Create query template",children:Object(Pe.jsx)(w.a,{sx:{p:"10px"},"aria-label":"open advanced search",onClick:function(){return l(!0)},children:Object(Pe.jsx)(Ne.a,{})})}),Object(Pe.jsx)(V.a,{sx:{height:28,m:.5},orientation:"vertical"}),Object(Pe.jsx)(Be.a,{title:"Run search",children:Object(Pe.jsx)(w.a,{sx:{p:"10px"},onClick:j,"aria-label":"run search",children:Object(Pe.jsx)(He.a,{})})})]})}),Object(Pe.jsx)(M.a,{sx:{width:800,textAlign:"center"},children:Object(Pe.jsx)(D.a,{color:"textPrimary",variant:"caption",children:"This is a Markdown text field. For code use ``` as delimiter, like ```my code here```. For Equations use $ as delimiter."})})]}),Object(Pe.jsx)(bt,{open:i,onClose:function(){return l(!1)}})]})})}function ht(){var e=re(),t=ie(Te),a=ie(_e);return Object(Pe.jsxs)(x.a,{spacing:2,children:[Object(Pe.jsx)(rt.a,{sx:{width:"400px"},value:t,id:"filled-basic",label:"Code",variant:"filled",onChange:function(t){e(ve(t.target.value))}}),Object(Pe.jsx)(rt.a,{sx:{width:"400px"},value:a,id:"filled-basic",label:"Equations",variant:"filled",onChange:function(t){e(ye(t.target.value))}}),Object(Pe.jsx)(R.a,{variant:"contained",onClick:function(){e(ge("separated")),e(ve(t)),e(ye(a)),e(ke())},children:"Search"})]})}function Ot(){var e=re(),t=ie(Se);return Object(Pe.jsxs)(x.a,{spacing:2,children:[Object(Pe.jsx)(rt.a,{sx:{width:"400px"},value:t,id:"filled-basic",label:"Id or URL",variant:"filled",onChange:function(t){e(Ce(t.target.value))}}),Object(Pe.jsx)(R.a,{variant:"contained",onClick:function(){e(ge("url")),e(Ce(t)),e(ke())},children:"Search"})]})}var mt=a(301),pt=a(168);function ft(){var e=c.a.useState([]),t=Object(h.a)(e,2),a=t[0],n=t[1],r=function(){throw Error("TODO")};return Object(Pe.jsx)(pt.a,{onDrop:function(e){n(e)},children:function(e){var t=e.getRootProps,c=e.getInputProps;return Object(Pe.jsxs)(M.a,{id:"lol",children:[Object(Pe.jsxs)(x.a,{spacing:4,children:[Object(Pe.jsxs)(M.a,Object(O.a)(Object(O.a)({},t()),{},{sx:{justifyContent:"center",minWidth:"70vh",minHeight:"10vh",bgcolor:function(e){return e.palette.primary.contrastText},display:"flex",alignItems:"center",border:"2px dashed #909090"},children:[Object(Pe.jsx)("input",Object(O.a)({},c())),Object(Pe.jsx)(D.a,{variant:"body1",component:"p",color:"textPrimary",children:"Drag n drop some files here, or click to select files"})]})),Object(Pe.jsx)(M.a,{sx:{textAlign:"center"},children:Object(Pe.jsx)(R.a,{onClick:r,variant:"contained",sx:{mx:"auto",px:function(e){return e.spacing(4)}},children:"Search"})})]}),Object(Pe.jsxs)(x.a,{direction:"row",sx:{minHeight:"32px"},spacing:2,children:[Object(Pe.jsx)(D.a,{variant:"button",component:"p",color:"textPrimary",children:"Files:"}),a.length>0&&a.map((function(e){return Object(Pe.jsx)(mt.a,{label:(t=e.name,c=10,t.length>c?"".concat(t.substring(0,c),"..."):t),onDelete:function(){return function(e){var t=Object(F.a)(a);a.forEach((function(a,n){a.name===e.name&&t.splice(n,1)})),n(t)}(e)}},e.name);var t,c}))]})]})}})}var gt={db_path:"",db_table_name:"",db_content_attribute_name:"",data_dir:"",allowed_search_modes:{default:!0,separated:!0,url:!0,file:!0}},vt=B.injectEndpoints({endpoints:function(e){return{getConfigs:e.query({query:function(){return"/configs"},providesTags:["Configs"]}),updateConfigs:e.mutation({query:function(e){return{url:"/configs",method:"POST",body:Object.assign({},e)}}})}},overrideExisting:!1}),yt=vt.useGetConfigsQuery,Ct=vt.useUpdateConfigsMutation,kt=["children","value","currentMode"];function wt(e){var t=e.children,a=e.value,n=e.currentMode,c=Object(m.a)(e,kt);return Object(Pe.jsx)("div",Object(O.a)(Object(O.a)({role:"tabpanel",hidden:a!==n,id:"tabpanel-".concat(n),"aria-labelledby":"tab-".concat(n)},c),{},{children:a===n&&Object(Pe.jsx)(M.a,{sx:{display:"flex",minHeight:function(e){return e.spacing(50)},justifyContent:"center",alignItems:"center"},children:t})}))}function Tt(e){return{id:"tab-".concat(e),"aria-controls":"tabpanel-".concat(e)}}function _t(){var e=re(),t=Object(p.a)(),a=it().data,c=void 0===a?[]:a,r=lt().data,i=void 0===r?[]:r,l=ot().data,o=void 0===l?[]:l,s=yt().data,u=void 0===s?gt:s,j=ie(qe),b=ie(Me),x=ie(Ee),m=n.useState(null),_=Object(h.a)(m,2),R=_[0],L=_[1],W=n.useState(null),I=Object(h.a)(W,2)[1],P=ie(De),A=Boolean(R),z="account-menu",F=Object(Pe.jsx)(g.a,{anchorEl:R,anchorOrigin:{vertical:"top",horizontal:"right"},id:z,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:A,onClose:function(){L(null),I(null)},children:Object(Pe.jsx)(T.a,{component:d.b,to:"/settings",children:"Settings"})});return Object(Pe.jsxs)(M.a,{sx:{bgcolor:"background.paper"},children:[Object(Pe.jsxs)(f.a,{position:"static",children:[Object(Pe.jsxs)(y.a,{children:[Object(Pe.jsx)(D.a,{variant:"h6",noWrap:!0,component:"div",sx:{display:{xs:"none",sm:"block"}},children:"RetrievalSystem"}),Object(Pe.jsx)(M.a,{sx:{flexGrow:1}}),Object(Pe.jsx)(Fe,{}),Object(Pe.jsxs)(M.a,{sx:{display:{xs:"none",md:"flex"}},children:[Object(Pe.jsxs)(v.a,{sx:{mx:2,minWidth:200},variant:"filled",children:[Object(Pe.jsx)(C.a,{id:"model-select-label",children:"Database"}),Object(Pe.jsx)(k.a,{sx:{bgcolor:"white","Mui-focused":{bgcolor:"red"}},size:"small",autoWidth:!0,labelId:"db-select-label",id:"db-select",value:b,onChange:function(t){e(Oe(t.target.value))},children:null===o||void 0===o?void 0:o.map((function(e){return Object(Pe.jsx)(T.a,{value:e,children:e},e)}))})]}),Object(Pe.jsxs)(v.a,{sx:{mx:2,minWidth:200},variant:"filled",children:[Object(Pe.jsx)(C.a,{id:"model-select-label",children:"Model"}),Object(Pe.jsx)(k.a,{sx:{bgcolor:"white"},size:"small",autoWidth:!0,labelId:"model-select-label",id:"model-select",value:j,onChange:function(t){e(pe(t.target.value))},children:null===i||void 0===i?void 0:i.map((function(e){return Object(Pe.jsx)(T.a,{value:e,children:e},e)}))})]}),Object(Pe.jsxs)(v.a,{sx:{mx:2,minWidth:200},variant:"filled",children:[Object(Pe.jsx)(C.a,{id:"modelLanguage-select-label",children:"Model language"}),Object(Pe.jsx)(k.a,{sx:{bgcolor:"white"},size:"small",autoWidth:!0,labelId:"modelLanguage-select-label",id:"modelLanguage-select",value:x,onChange:function(t){e(me(t.target.value))},children:null===c||void 0===c?void 0:c.map((function(e){return Object(Pe.jsx)(T.a,{value:e,children:e},e)}))})]}),Object(Pe.jsx)(w.a,{size:"large",edge:"end","aria-controls":z,"aria-haspopup":"true",onClick:function(e){L(e.currentTarget)},color:"inherit",children:Object(Pe.jsx)(E.a,{})})]})]}),Object(Pe.jsxs)(S.a,{value:P,onChange:function(t,a){e(ge(a))},indicatorColor:"secondary",textColor:"inherit",variant:"fullWidth",children:[Object(Pe.jsx)(q.a,Object(O.a)({disabled:!u.allowed_search_modes.default,value:"default",label:"Default"},Tt(0))),Object(Pe.jsx)(q.a,Object(O.a)({disabled:!u.allowed_search_modes.separated,value:"separated",label:"Separated"},Tt(1))),Object(Pe.jsx)(q.a,Object(O.a)({disabled:!u.allowed_search_modes.url,value:"url",label:"ID or URL"},Tt(2))),Object(Pe.jsx)(q.a,Object(O.a)({disabled:!u.allowed_search_modes.file,value:"file",label:"File"},Tt(2)))]})]}),Object(Pe.jsx)(wt,{value:"default",currentMode:P,dir:t.direction,children:Object(Pe.jsx)(xt,{})}),Object(Pe.jsx)(wt,{value:"separated",currentMode:P,dir:t.direction,children:Object(Pe.jsx)(ht,{})}),Object(Pe.jsx)(wt,{value:"url",currentMode:P,dir:t.direction,children:Object(Pe.jsx)(Ot,{})}),Object(Pe.jsx)(wt,{value:"file",currentMode:P,dir:t.direction,children:Object(Pe.jsx)(ft,{})}),F]})}var Et=a(309),St=a(56),qt=a(323),Dt=a(287),Mt=a(164),Rt=a.n(Mt),Lt=a(163),Wt=a.n(Lt),It=B.injectEndpoints({endpoints:function(e){return{addRelevance:e.mutation({query:function(e){return{url:"/relevance",method:"POST",body:e}},invalidatesTags:["Relevances"]})}},overrideExisting:!1}).useAddRelevanceMutation;function Pt(e){var t=e.result,a=e.onClose,n=e.open,c=t.id,r=t.title,i=t.body,l=Object(p.a)(),o=Object(Dt.a)(l.breakpoints.down("sm")),s=It(),d=Object(h.a)(s,1)[0],u=ie(We),j=function(){var e=Object(Ye.a)(Ve.a.mark((function e(){var t;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={query:{id:-1,code:u.code,equations:u.equation,text:u.text,exchange:u.exchange},result_id:c,value:"yes"},e.next=4,d(t);case 4:throw Error("TODO");case 7:throw e.prev=7,e.t0=e.catch(0),Error("TODO");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(Pe.jsxs)(L.a,{onClose:a,open:n,fullWidth:!0,maxWidth:"lg",fullScreen:o,children:[Object(Pe.jsxs)(P.a,{sx:{color:function(e){return e.palette.secondary.main},display:"flex",alignItems:"center"},children:[r,Object(Pe.jsx)(M.a,{sx:{flexGrow:1}}),Object(Pe.jsx)(M.a,{sx:{mx:function(e){return e.spacing(2)}},children:Object(Pe.jsx)(D.a,{variant:"body2",color:"textPrimary",children:"Is this relevant?"})}),Object(Pe.jsx)(w.a,{onClick:j,children:Object(Pe.jsx)(Wt.a,{fontSize:"small"})}),Object(Pe.jsx)(w.a,{onClick:function(){throw Error("TODO")},children:Object(Pe.jsx)(Rt.a,{fontSize:"small"})})]}),Object(Pe.jsxs)(I.a,{children:[Object(Pe.jsx)(qt.a,{}),Object(Pe.jsx)(D.a,{component:"div",variant:"body1",children:Object(Pe.jsx)(jt,{text:i})})]}),Object(Pe.jsx)(W.a,{children:Object(Pe.jsx)(R.a,{onClick:a,variant:"text",children:"close"})})]})}function At(e){var t=e.result,a=t.title,n=t.body,r=c.a.useState(!1),i=Object(h.a)(r,2),l=i[0],o=i[1];return Object(Pe.jsxs)(Pe.Fragment,{children:[Object(Pe.jsx)(Y.a,{alignItems:"flex-start",children:Object(Pe.jsx)(X.a,{onClick:function(){return o(!0)},children:Object(Pe.jsx)(Z.a,{primary:a,children:Object(Pe.jsx)(jt,{text:n})})})}),Object(Pe.jsx)(V.a,{variant:"middle",component:"li"}),Object(Pe.jsx)(Pt,{result:t,open:l,onClose:function(){return o(!1)}})]})}var zt=B.injectEndpoints({endpoints:function(e){return{getResults:e.query({query:function(e){return"/search?".concat(e)},providesTags:["Results"]})}},overrideExisting:!1}).useGetResultsQuery;function Ft(){var e=ie(Le),t=zt(null!==e&&void 0!==e?e:$.f),a=t.data,n=t.isLoading,c=t.isFetching,r=t.isError,i=null===a||void 0===a?void 0:a.results;return r?Object(Pe.jsx)($e.a,{sx:{px:16,py:2,textAlign:"center"},children:Object(Pe.jsx)(D.a,{variant:"h4",color:"textPrimary",children:"Oops... something went wrong"})}):n||c?Object(Pe.jsx)(M.a,{sx:Object(Xe.a)({px:16,py:2,bgcolor:"background.default"},"& .active, & .".concat(St.a.root,":hover"),{color:"red",fontWeight:"bold","& svg":{fill:"red"}}),children:Object(Pe.jsx)(Et.a,{})}):i&&0===i.length?Object(Pe.jsx)(M.a,{sx:{px:16,py:2,bgcolor:"background.paper",textAlign:"center"},children:Object(Pe.jsx)(D.a,{variant:"h3",color:"textPrimary",children:"No posts :("})}):i?Object(Pe.jsxs)($e.a,{sx:{px:16,py:2},children:[Object(Pe.jsx)(D.a,{variant:"h4",color:"textPrimary",children:"Results:"}),Object(Pe.jsx)(z.a,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:3},children:null===i||void 0===i?void 0:i.map((function(e){return Object(Pe.jsx)(At,{result:e},e.id)}))})]}):Object(Pe.jsx)(M.a,{sx:{flexGrow:1,height:"100%"}})}function Ut(){return Object(Pe.jsxs)(x.a,{id:"search-page-stack",children:[Object(Pe.jsx)(_t,{}),Object(Pe.jsx)(Ft,{})]})}function $t(){return Object(Pe.jsx)(j.a,{item:!0,xs:12,children:"About page"})}var Bt=a(292),Gt=a(165),Nt=a.n(Gt);function Qt(){var e=ie(je),t=e.time,a=e.text,n=e.open,c=re(),r=Object(Pe.jsxs)(Pe.Fragment,{children:[Object(Pe.jsx)(R.a,{color:"secondary",size:"small",onClick:function(){return c(ue(!1))},children:"UNDO"}),Object(Pe.jsx)(w.a,{size:"small","aria-label":"close",color:"inherit",onClick:function(){return c(ue(!1))},children:Object(Pe.jsx)(Nt.a,{fontSize:"small"})})]});return Object(Pe.jsx)(Bt.a,{autoHideDuration:t,onClose:function(){return c(ue(!1))},message:a,open:n,action:r})}var Ht=a(293),Jt=a(238);function Kt(){var e=Ct(),t=Object(h.a)(e,2),a=t[0],n=t[1].isLoading,r=yt(),i=r.data,l=void 0===i?gt:i,o=r.isSuccess,s=r.isLoading,d=r.isError,u=c.a.useState(l),j=Object(h.a)(u,2),b=j[0],m=j[1];c.a.useEffect((function(){m(l)}),[o]);var p,f=function(e){var t=e.target,a=t.name,n=t.value;m((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(Xe.a)({},a,n))}))},g=function(e){var t=e.target,a=t.name,n=t.checked;m((function(e){return Object(O.a)(Object(O.a)({},e),{},{allowed_search_modes:Object(O.a)(Object(O.a)({},e.allowed_search_modes),{},Object(Xe.a)({},a,n))})}))};return s&&(p=Object(Pe.jsx)(Et.a,{})),d&&(p=Object(Pe.jsx)(M.a,{role:"contentinfo",children:"Oops \ud83d\ude2f something went wrong"})),o&&(p=Object(Pe.jsxs)(x.a,{spacing:2,children:[Object(Pe.jsx)(rt.a,{onChange:f,label:"DB_PATH",variant:"filled",name:"db_path",id:"db_path",value:b.db_path}),Object(Pe.jsx)(rt.a,{onChange:f,label:"DB_TABLE_NAME",variant:"filled",name:"db_table_name",id:"db_table_name",value:b.db_table_name}),Object(Pe.jsx)(rt.a,{onChange:f,label:"DB_CONTENT_ATTRIBUTE_NAME",variant:"filled",name:"db_content_attribute_name",id:"db_content_attribute_name",value:b.db_content_attribute_name}),Object(Pe.jsx)(rt.a,{onChange:f,label:"DATA_DIR",variant:"filled",name:"data_dir",id:"data_dir",value:b.data_dir}),Object(Pe.jsxs)(Jt.a,{row:!0,children:[Object(Pe.jsx)(tt.a,{disabled:!0,control:Object(Pe.jsx)(Ht.a,{onChange:g,checked:b.allowed_search_modes.default,name:"default",inputProps:{"aria-label":"controlled"}}),label:"Default"}),Object(Pe.jsx)(tt.a,{control:Object(Pe.jsx)(Ht.a,{onChange:g,checked:b.allowed_search_modes.separated,name:"separated"}),label:"Separated"}),Object(Pe.jsx)(tt.a,{control:Object(Pe.jsx)(Ht.a,{onChange:g,checked:b.allowed_search_modes.url,name:"url"}),label:"ID/URL"}),Object(Pe.jsx)(tt.a,{control:Object(Pe.jsx)(Ht.a,{onChange:g,checked:b.allowed_search_modes.file,name:"file"}),label:"File"})]}),Object(Pe.jsx)(R.a,{onClick:function(){var e=Object.fromEntries(Object.entries(b).filter((function(e){return""!==Object(h.a)(e,2)[1]})));a(e)},children:"Submit"}),n&&Object(Pe.jsx)(Et.a,{})]})),Object(Pe.jsx)(Ze.a,{sx:{maxWidth:"70vh",mx:"auto",my:10},children:Object(Pe.jsx)(et.a,{children:p})})}var Vt={loader:{load:["[tex]/html"]},tex:{packages:{"[+]":["html"]},inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]}};function Yt(){return Object(Pe.jsx)(d.a,{children:Object(Pe.jsx)(j.a,{component:"main",container:!0,sx:{bgcolor:function(e){return e.palette.background.paper},height:"100%"},children:Object(Pe.jsx)(j.a,{item:!0,xs:12,children:Object(Pe.jsxs)(b.MathJaxContext,{config:Vt,children:[Object(Pe.jsxs)(u.c,{children:[Object(Pe.jsx)(u.a,{path:"/about",component:$t}),Object(Pe.jsx)(u.a,{path:"/search",component:Ut}),Object(Pe.jsx)(u.a,{path:"/settings",component:Kt}),Object(Pe.jsx)(u.a,{exact:!0,path:"/",component:Ut})]}),Object(Pe.jsx)(Qt,{})]})})})})}var Xt,Zt=a(35),ea=Object(Zt.b)((Xt={},Object(Xe.a)(Xt,G.reducerPath,G.reducer),Object(Xe.a)(Xt,"snackbar",be),Object(Xe.a)(Xt,"search",Ie),Xt));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ta,aa=Object(o.a)(),na=(Object(o.a)({palette:{mode:"dark"}}),Object(le.a)({reducer:ea,middleware:function(e){return e().concat(G.middleware)},preloadedState:ta}));i.a.render(Object(Pe.jsx)(c.a.StrictMode,{children:Object(Pe.jsx)(s.a,{theme:aa,children:Object(Pe.jsx)(l.a,{store:na,children:Object(Pe.jsx)(Yt,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[228,1,2]]]);
//# sourceMappingURL=main.d8dddc5e.chunk.js.map